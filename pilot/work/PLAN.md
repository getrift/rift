# PLAN

> Auto-generated by Orchestrator. Do not edit manually.

## Current Feature
**Rift V1** — Visual craft debugger for AI-generated React components.
Core loop: paste TSX → preview → click element → tweak craft values → copy refined code.

---

## Design Tokens (Locked)

```css
/* Backgrounds */
--bg-app:        #000000;     /* outer frame */
--bg-panel:      #1a1a1a;     /* side panels */
--bg-canvas:     #f5f5f5;     /* center preview (light) */
--bg-surface:    #262626;     /* cards/inputs in panels */
--bg-hover:      #333333;     /* interactive hover */

/* Borders */
--border-subtle: #2a2a2a;     /* panel borders */
--border-muted:  #3a3a3a;     /* input borders */

/* Text */
--text-primary:  #ffffff;     /* headings */
--text-secondary:#a0a0a0;     /* labels */
--text-muted:    #666666;     /* hints/disabled */

/* Radii */
--radius-sm:     6px;
--radius-md:     12px;
--radius-lg:     16px;
```

**No accent color.** Selection = white outline/glow.

---

## Architecture Decisions (V1)

| Concern | Decision | Rationale |
|---------|----------|-----------|
| **Framework** | Next.js 15 + App Router | Standard stack |
| **Compiler** | Sucrase (browser) | 10x faster than Babel, TSX only, ~50KB |
| **Preview isolation** | iframe + srcdoc | Safe eval, style isolation |
| **Style injection** | Inline `style={{}}` | PRD allows, guarantees correctness |
| **Editor** | CodeMirror 6 | Lighter than Monaco |
| **State** | Zustand | Minimal |
| **Panels** | Fixed widths | Left 280px, Right 320px |

---

## Full Task Breakdown (V1)

### Phase 0: Scaffold
- **T-001** — Project setup (Next.js + Tailwind + base config)

### Phase 1: Layout + Editor
- **T-002** — Three-panel layout shell (fixed widths)
- **T-003** — Code editor panel (CodeMirror, TSX highlighting)

### Phase 2: Live Preview
- **T-004** — TSX compiler (Sucrase) + iframe renderer
- **T-005** — Error boundary + friendly error display

### Phase 3: Selection
- **T-006** — Click-to-select in iframe (postMessage bridge)
- **T-007** — Selection highlight overlay + selected node state

### Phase 4: Craft Controls
- **T-008** — Right panel: spacing controls (padding, gap)
- **T-009** — Right panel: radius + font-size
- **T-010** — Right panel: text color + background color (grey presets)
- **T-011** — Shadow editor (multi-layer, drop/inner, presets)

### Phase 5: Export
- **T-012** — "Copy refined component" (inject styles into AST, copy to clipboard)

---

## Next Tasks

1. **T-001** — Scaffold Next.js 15 + Tailwind + Zustand + CodeMirror + Sucrase
   - Risk: **MED** (package.json, but standard setup)
   - Files: root config, /app, /components, /lib, /styles

2. **T-002** — Three-panel layout shell
   - Left: 280px fixed, dark panel
   - Center: flex, light canvas
   - Right: 320px fixed, dark panel
   - Risk: **LOW**

3. **T-003** — Code editor (CodeMirror 6)
   - TSX highlighting, dark theme
   - Zustand store for code state
   - Risk: **LOW**

---

## Blockers
_None — ready to dispatch T-001._
